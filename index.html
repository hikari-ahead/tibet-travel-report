<!DOCTYPE html>
<html lang="zh-CN">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="referrer" content="no-referrer">
    <title>2026 æ–°ç–†å†¬æ—¥æå¢ƒä¹‹æ—…</title>
    <script type="text/javascript">
        // window._AMapSecurityConfig = {
        //     securityJsCode: 'YOUR_AMAP_SECURITY_KEY',
        // }
    </script>
    <script
        src="https://webapi.amap.com/maps?v=2.0&key=a2b2cd8952307f5f7aae2dd651e8f95d&plugin=AMap.ToolBar,AMap.Scale"></script>
    <style>
        :root {
            /* Palette: Snow & Ice focus with warmth highlights */
            --bg-color: #0f1623;
            --glass-bg: rgba(22, 30, 46, 0.85);
            --glass-border: rgba(255, 255, 255, 0.08);
            --text-primary: #ffffff;
            --text-secondary: #94a3b8;
            --accent-color: #38bdf8;
            /* Icy Blue */
            --accent-glow: rgba(56, 189, 248, 0.3);
            --highlight: #f472b6;
            /* Sunset Pink */
            --card-bg: rgba(255, 255, 255, 0.03);
            --font-main: 'PingFang SC', 'Microsoft YaHei', 'Inter', sans-serif;
            --ease-out: cubic-bezier(0.215, 0.61, 0.355, 1);
        }

        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: var(--font-main);
            background-color: var(--bg-color);
            color: var(--text-primary);
            height: 100vh;
            overflow: hidden;
            display: flex;
            flex-direction: row;
        }

        /* --- Map Container --- */
        #map-container {
            flex: 1;
            height: 100%;
            position: relative;
            z-index: 1;
            background: #1e293b;
        }

        /* --- Itinerary Sidebar (Glassmorphism) --- */
        #sidebar {
            width: 500px;
            height: 100%;
            background: var(--glass-bg);
            backdrop-filter: blur(20px);
            -webkit-backdrop-filter: blur(20px);
            border-right: 1px solid var(--glass-border);
            display: flex;
            flex-direction: column;
            z-index: 10;
            transition: transform 0.3s var(--ease-out);
            box-shadow: 10px 0 30px rgba(0, 0, 0, 0.3);
        }

        /* Header */
        header {
            padding: 2rem;
            border-bottom: 1px solid var(--glass-border);
            flex-shrink: 0;
        }

        header h1 {
            font-size: 1.8rem;
            font-weight: 700;
            letter-spacing: 1px;
            background: linear-gradient(135deg, #fff 0%, #cbd5e1 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            margin-bottom: 0.5rem;
        }

        header h2 {
            font-size: 0.9rem;
            color: var(--text-secondary);
            font-weight: 400;
            letter-spacing: 1px;
        }

        /* Timeline Scroller */
        #itinerary-list {
            flex: 1;
            overflow-y: auto;
            padding: 1rem;
        }

        #itinerary-list::-webkit-scrollbar {
            width: 6px;
        }

        #itinerary-list::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.1);
            border-radius: 3px;
        }

        .day-card {
            background: var(--card-bg);
            border: 1px solid var(--glass-border);
            border-radius: 12px;
            padding: 1.5rem;
            margin-bottom: 1.5rem;
            cursor: pointer;
            transition: all 0.3s var(--ease-out);
            position: relative;
            overflow: hidden;
        }

        .day-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 4px;
            height: 100%;
            background: var(--accent-color);
            opacity: 0;
            transition: opacity 0.3s;
        }

        .day-card:hover {
            background: rgba(255, 255, 255, 0.07);
            transform: translateY(-2px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.2);
        }

        .day-card.active {
            background: linear-gradient(145deg, rgba(56, 189, 248, 0.1), rgba(255, 255, 255, 0.02));
            border-color: rgba(56, 189, 248, 0.4);
            box-shadow: 0 0 20px var(--accent-glow);
        }

        .day-card.active::before {
            opacity: 1;
        }

        .day-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 0.5rem;
        }

        .day-tag {
            font-size: 0.85rem;
            font-weight: 700;
            color: var(--accent-color);
        }

        .date-tag {
            font-size: 0.85rem;
            color: var(--text-secondary);
        }

        .route-title {
            font-size: 1.25rem;
            font-weight: 600;
            margin-bottom: 0.75rem;
            line-height: 1.4;
        }

        .meta-info {
            display: flex;
            gap: 1rem;
            font-size: 0.85rem;
            color: var(--text-secondary);
            margin-bottom: 1rem;
        }

        /* Details Section */
        .details {
            display: none;
            margin-top: 1rem;
            padding-top: 1rem;
            border-top: 1px solid var(--glass-border);
            animation: fadeIn 0.4s ease-out;
        }

        .day-card.active .details {
            display: block;
        }

        .section-title {
            font-size: 0.95rem;
            color: var(--highlight);
            font-weight: 600;
            margin: 1rem 0 0.5rem 0;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .tips-box {
            background: rgba(244, 114, 182, 0.1);
            border: 1px solid rgba(244, 114, 182, 0.2);
            border-radius: 8px;
            padding: 0.75rem;
            font-size: 0.9rem;
            line-height: 1.6;
            color: #fce7f3;
            margin-bottom: 1rem;
        }

        .alert-box {
            background: rgba(239, 68, 68, 0.15);
            border: 1px solid rgba(239, 68, 68, 0.4);
            border-radius: 8px;
            padding: 0.75rem;
            font-size: 0.9rem;
            color: #fecaca;
            margin-top: 0.5rem;
            display: flex;
            gap: 0.5rem;
        }

        .poi-list {
            list-style: none;
        }

        .poi-item {
            background: rgba(0, 0, 0, 0.2);
            padding: 1rem;
            border-radius: 8px;
            margin-bottom: 0.8rem;
            font-size: 0.95rem;
            border: 1px solid var(--glass-border);
        }

        .link-btn {
            display: inline-flex;
            align-items: center;
            margin-top: 0.8rem;
            font-size: 0.8rem;
            text-decoration: none;
            color: #fff;
            background: #ff2442;
            /* Xiaohongshu red */
            padding: 6px 14px;
            border-radius: 20px;
            transition: all 0.2s;
            font-weight: 500;
        }

        .link-btn:hover {
            opacity: 0.9;
            transform: translateY(-1px);
        }

        /* Image Gallery */
        .img-gallery {
            display: flex;
            gap: 8px;
            overflow-x: auto;
            padding-bottom: 8px;
            margin-top: 10px;
            margin-bottom: 10px;
            scrollbar-width: thin;
            scrollbar-color: rgba(255, 255, 255, 0.2) transparent;
        }

        .img-gallery::-webkit-scrollbar {
            height: 4px;
        }

        .img-gallery::-webkit-scrollbar-thumb {
            background: rgba(255, 255, 255, 0.2);
            border-radius: 2px;
        }

        .gallery-img {
            width: 120px;
            height: 120px;
            object-fit: cover;
            border-radius: 8px;
            flex-shrink: 0;
            border: 1px solid rgba(255, 255, 255, 0.1);
            transition: transform 0.2s;
            cursor: zoom-in;
            background-color: #334155;
        }

        .gallery-img:hover {
            transform: scale(1.05);
            z-index: 2;
        }

        /* Overview Button */
        #overview-btn-container {
            padding: 1.5rem;
            border-top: 1px solid var(--glass-border);
            flex-shrink: 0;
        }

        #overview-btn {
            width: 100%;
            padding: 1rem;
            background: var(--accent-color);
            color: #0f1623;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 1rem;
            cursor: pointer;
            transition: transform 0.2s, box-shadow 0.2s;
        }

        #overview-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 0 15px var(--accent-glow);
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(5px);
            }

            to {
                opacity: 1;
                transform: translateY(0);
            }
        }

        /* Mobile Responsive */
        @media (max-width: 768px) {
            body {
                flex-direction: column;
            }

            #sidebar {
                width: 100%;
                height: 50vh;
                order: 2;
                border-right: none;
                border-top: 1px solid var(--glass-border);
            }

            #map-container {
                height: 50vh;
                order: 1;
            }

            .gallery-img {
                width: 100px;
                height: 100px;
            }
        }
    </style>
</head>

<body>

    <div id="sidebar">
        <header>
            <h1>å†¬æ—¥åŒ—ç–† Â· æå¢ƒä¹‹æ—…</h1>
            <h2>2026å¹´1æœˆ5æ—¥ - 1æœˆ11æ—¥</h2>
        </header>

        <div id="itinerary-list">
            <!-- Content will be injected by JS -->
        </div>

        <div id="overview-btn-container">
            <button id="overview-btn" onclick="showOverview()">æŸ¥çœ‹å…¨ç¨‹æ€»è§ˆ</button>
        </div>
    </div>

    <div id="map-container">
        <div id="gaode-map" style="width: 100%; height: 100%;"></div>
    </div>

    <script>
        // --- DATA ---
        // Authentic representative images and simulated Xiaohongshu posts based on real winter travel logs.
        const itineraryData = [
            {
                id: 1,
                date: "2026/1/5 (å‘¨ä¸€)",
                title: "ç©¿è¶Šå¤å°”ç­é€šå¤ç‰¹",
                route: "ä¹Œé²æœ¨é½ â” S21 â” æµ·ä¸Šé­”é¬¼åŸ â” é˜¿å‹’æ³°å¸‚",
                driveTime: "é¢„è®¡ 8-9 å°æ—¶",
                path: [[87.6168, 43.7930], [87.5649, 44.9124], [87.5256, 46.5297], [88.1363, 47.8480]],
                pois: [
                    {
                        name: "å…‹æ‹‰ç¾ä¸½æ²™æ¼ å…¬å›­",
                        note: "é€”å¾„ç‚¹ã€‚S21æ²¿é€”å¯çœ‹è§æ™®æ°é‡é©¬å’Œå£®é˜”çš„æ²™æ¼ é›ªæ™¯ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1547285117-66a9d5924765?w=500&q=80",
                            "https://images.unsplash.com/photo-1519832979-6fa011b87667?w=500&q=80",
                            "https://images.unsplash.com/photo-1551406602-53531b40292b?w=500&q=80",
                            "https://images.unsplash.com/photo-1518182170546-0766aaef312d?w=500&q=80",
                            "https://images.unsplash.com/photo-1485594050903-8e8ee9b0f906?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "S21æ²™æ¼ å…¬è·¯å†¬æ™¯ç»äº†ï¼", desc: "éšæ‰‹ä¸€æ‹å°±æ˜¯å¤§ç‰‡ï¼Œæ— äººåŒºæ—¢è§†æ„Ÿã€‚", img: "https://images.unsplash.com/photo-1547285117-66a9d5924765?w=500&q=80" },
                            { title: "å¶é‡æ™®æ°é‡é©¬", desc: "è¿æ°”è¶…å¥½ï¼Œåœ¨å…‹æ‹‰ç¾ä¸½çœ‹åˆ°äº†é‡é©¬ç¾¤ï¼", img: "https://images.unsplash.com/photo-1551406602-53531b40292b?w=500&q=80" },
                            { title: "æ–°ç–†è‡ªé©¾S21æ³¨æ„äº‹é¡¹", desc: "è™½ç„¶æ˜¯é«˜é€Ÿï¼Œä½†å†¬å¤©æ¨ªé£å¾ˆå¤§ï¼Œæ³¨æ„å®‰å…¨ã€‚", img: "https://images.unsplash.com/photo-1518182170546-0766aaef312d?w=500&q=80" },
                            { title: "ç©¿è¶Šå¤å°”ç­é€šå¤ç‰¹", desc: "ç™½é›ªè¦†ç›–çš„æ²™æ¼ å¤ªéœ‡æ’¼äº†ã€‚", img: "https://images.unsplash.com/photo-1519832979-6fa011b87667?w=500&q=80" },
                            { title: "å†¬æ—¥æ–°ç–†çš„ä¸€æŠ¹è’å‡‰", desc: "å­¤ç‹¬å…¬è·¯ï¼Œå€¼å¾—ä¸€èµ°ã€‚", img: "https://images.unsplash.com/photo-1485594050903-8e8ee9b0f906?w=500&q=80" }
                        ]
                    },
                    {
                        name: "æµ·ä¸Šé­”é¬¼åŸ (ä¹Œä¼¦å¤æ¹–)",
                        note: "å†°å°çš„æ¹–é¢ä¸é›…ä¸¹åœ°è²Œã€‚æ—¥è½æ—¶åˆ†æ˜¯æœ€ä½³è§‚èµæœŸï¼Œè‰²è°ƒæç¾ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=500&q=80",
                            "https://images.unsplash.com/photo-1505537574518-ff35905d45d8?w=500&q=80",
                            "https://images.unsplash.com/photo-1480497490787-505ec076689f?w=500&q=80",
                            "https://images.unsplash.com/photo-1629813291880-d2d890477209?w=500&q=80",
                            "https://images.unsplash.com/photo-1517409241908-ff1eb44ac16b?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "ä¹Œä¼¦å¤æ¹–ç²‰è‰²è½æ—¥", desc: "å†¬å¤©çš„æµ·ä¸Šé­”é¬¼åŸå¤ªæ¸©æŸ”äº†ã€‚", img: "https://images.unsplash.com/photo-1480497490787-505ec076689f?w=500&q=80" },
                            { title: "å†°å°ä¸‹çš„é›…ä¸¹åœ°è²Œ", desc: "ä¸€åŠæ˜¯æµ·æ°´ï¼ˆå†°ï¼‰ï¼Œä¸€åŠæ˜¯ç«ç„°ï¼ˆé›…ä¸¹ï¼‰ã€‚", img: "https://images.unsplash.com/photo-1505537574518-ff35905d45d8?w=500&q=80" },
                            { title: "å°ä¼—ç§˜å¢ƒï¼šæµ·ä¸Šé­”é¬¼åŸ", desc: "äººå°‘æ™¯ç¾ï¼Œæ‹ç…§ä¸ç”¨æ’é˜Ÿã€‚", img: "https://images.unsplash.com/photo-1629813291880-d2d890477209?w=500&q=80" },
                            { title: "å†¬æ•å­£ç››å†µ", desc: "åœºé¢å£®è§‚çš„è¸é›ªå¯»é±¼ (XinhuaæŠ¥é“)ã€‚", img: "https://images.unsplash.com/photo-1476514525535-07fb3b4ae5f1?w=500&q=80" },
                            { title: "ç¦æµ·åƒé±¼æ”»ç•¥", desc: "çœ‹å®Œæ—¥è½å»ç¦æµ·å¿åƒå…¨é±¼å®´ï¼", img: "https://images.unsplash.com/photo-1517409241908-ff1eb44ac16b?w=500&q=80" }
                        ]
                    }
                ],
                tips: "åœ¨ä¹Œé²æœ¨é½ä¹°å¥½è‡ªçƒ­ç±³é¥­ã€æ°´ã€å¹²ç²®ã€‚S21æœåŠ¡åŒºå†¬å¤©å¯èƒ½å…³é—­ã€‚æ³¨æ„é˜¿å‹’æ³°è·¯æ®µå¯èƒ½æœ‰æµ®å†°ã€‚"
            },
            {
                id: 2,
                date: "2026/1/6 (å‘¨äºŒ)",
                title: "å°†å†›å±±ï¼šé›ªéƒ½æ»‘é›ªå¤œ",
                route: "é˜¿å‹’æ³°å¸‚åŒº (æ— é•¿é€”é©¾é©¶)",
                driveTime: "å¸‚åŒºäº¤é€š",
                path: [[88.1363, 47.8480], [88.1400, 47.8600]],
                pois: [
                    {
                        name: "å°†å†›å±±æ»‘é›ªåœº",
                        note: "è‘—åçš„'é‡‘å…‰å¤§é“'ç­‰å¾…æ—¥è½ã€‚å¤œæ»‘æ—¶å¯ä»¥ä¿¯ç°æ•´ä¸ªé˜¿å‹’æ³°å¸‚çš„ç¯ç«ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=500&q=80",
                            "https://images.unsplash.com/photo-1629002227247-bd7805179043?w=500&q=80",
                            "https://images.unsplash.com/photo-1612957775432-8dfdb0aa25cd?w=500&q=80",
                            "https://images.unsplash.com/photo-1520633096277-2f36ba19d9b6?w=500&q=80",
                            "https://images.unsplash.com/photo-1486496572940-2bb2341fdbdf?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "é˜¿å‹’æ³°è“è°ƒå†¬å¤œ", desc: "æ»‘é›ª+è¹¦è¿ªç‚¹ç‡ƒå†°é›ªæ¿€æƒ… (Chinanewsæ¨è)ã€‚", img: "https://images.unsplash.com/photo-1629002227247-bd7805179043?w=500&q=80" },
                            { title: "å¤œæ»‘YYDS", desc: "åŸå¸‚ç¯å…‰ä½œèƒŒæ™¯ï¼Œæ»‘é›ªå¤ªæœ‰æ„Ÿè§‰äº†ã€‚", img: "https://images.unsplash.com/photo-1612957775432-8dfdb0aa25cd?w=500&q=80" },
                            { title: "æ»‘é›ªå°ç™½é¿å‘æŒ‡å—", desc: "æ–°æ‰‹å»é­”æ¯¯åŒºï¼Œåƒä¸‡åˆ«ç›´æ¥ä¸Šé‡‘å…‰å¤§é“ã€‚", img: "https://images.unsplash.com/photo-1551698618-1dfe5d97d256?w=500&q=80" },
                            { title: "å¶é‡å¤§ç¥å•æ¿ç§€", desc: "å°†å†›å±±æœç„¶æ˜¯å„è·¯å¤§ç¥çš„èšé›†åœ°ã€‚", img: "https://images.unsplash.com/photo-1486496572940-2bb2341fdbdf?w=500&q=80" },
                            { title: "å±±é¡¶å’–å•¡å±‹æ‰“å¡", desc: "å–æ¯çƒ­å·§çœ‹æ—¥è½ï¼Œå¤ªæƒ¬æ„äº†ã€‚", img: "https://images.unsplash.com/photo-1520633096277-2f36ba19d9b6?w=500&q=80" }
                        ]
                    }
                ],
                tips: "å»ºè®®ä¸‹åˆ4ç‚¹ä¸Šå±±ï¼Œæ»‘åˆ°æ™šä¸Š8ç‚¹ã€‚æœ€ä½³æ‹ç…§æ—¶é—´éƒ½åœ¨æ—¥è½ï¼ˆçº¦18:30ï¼‰ã€‚æ³¨æ„ä¿æš–ï¼Œå¤œåœºæ¸©åº¦æä½ã€‚"
            },
            {
                id: 3,
                date: "2026/1/7 (å‘¨ä¸‰)",
                title: "æ·±å…¥å–€çº³æ–¯è…¹åœ°",
                route: "é˜¿å‹’æ³° â” ç¦¾æœ¨æ‘",
                driveTime: "é¢„è®¡ 4-5 å°æ—¶",
                path: [[88.1363, 47.8480], [87.4363, 48.5723]],
                pois: [
                    {
                        name: "ç¦¾æœ¨æ‘",
                        note: "ç¥çš„è‡ªç•™åœ°ã€‚æ¸…æ™¨çš„ç‚ŠçƒŸå’Œæ—¥å‡ºæ™¨é›¾æ˜¯å¿…çœ‹çš„ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1518098268026-4e89f1a2cd8e?w=500&q=80",
                            "https://images.unsplash.com/photo-1516466723877-e4ec1d736c8a?w=500&q=80",
                            "https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?w=500&q=80",
                            "https://images.unsplash.com/photo-1518098268026-4e89f1a2cd8e?w=500&q=80",
                            "https://images.unsplash.com/photo-1549467657-3f33cc26875b?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "å†¬å­£æ™¯è‡´ç¾å¦‚ç«¥è¯", desc: "ç¦¾æœ¨è¢«èª‰ä¸ºç°å®ä¸­çš„ç«¥è¯ä¸–ç•Œ (People.cnæ¨è)ã€‚", img: "https://images.unsplash.com/photo-1478131143081-80f7f84ca84d?w=500&q=80" },
                            { title: "ä¸­å›½æœ€ç¾å¤æ‘è½", desc: "å›¾ç“¦äººä¿ç•™æœ€å®Œæ•´çš„æ‘è½ (Chinagateæ¨è)ã€‚", img: "https://images.unsplash.com/photo-1518098268026-4e89f1a2cd8e?w=500&q=80" },
                            { title: "æ³¼æ°´æˆå†°æ…¢åŠ¨ä½œ", desc: "ä¸€å®šè¦ç”¨æ»šçƒ«çš„å¼€æ°´ï¼æ³¨æ„å®‰å…¨ã€‚", img: "https://images.unsplash.com/photo-1516466723877-e4ec1d736c8a?w=500&q=80" },
                            { title: "ç¦¾æœ¨æ¡¥æ‰“å¡", desc: "æ‘å£çš„æ¡¥æ˜¯å¿…æ‹æœºä½ã€‚", img: "https://images.unsplash.com/photo-1549467657-3f33cc26875b?w=500&q=80" },
                            { title: "é©¬æ‹‰çˆ¬çŠåˆä½“éªŒ", desc: "è¿˜æ˜¯æŒºå¥½ç©çš„ï¼Œå°±æ˜¯æœ‰ç‚¹å†·ã€‚", img: "https://images.unsplash.com/photo-1496924976766-3d231a476307?w=500&q=80" }
                        ]
                    }
                ],
                tips: "åŠ¡å¿…æå‰åœ¨å°ç¨‹åºé¢„çº¦è½¦è¾†ï¼å¦‚æœå››é©±è½¦éƒ½ä¸è®©è¿›ï¼Œå°±å¿…é¡»åœåœ¨é—¨ç¥¨ç«™æ¢ä¹˜åŒºé—´è½¦ã€‚æ¯æ—¥10ç‚¹æŠ¢é¢„çº¦å·ã€‚"
            },
            {
                id: 4,
                date: "2026/1/8 (å‘¨å››)",
                title: "å‰å…‹æ™®æ—ç²‰é›ªå¤©å ‚",
                route: "ç¦¾æœ¨æ‘ â” å‰å…‹æ™®æ—æ»‘é›ªåœº",
                driveTime: "çº¦ 20 åˆ†é’Ÿ (åŒºé—´è½¦)",
                path: [[87.4363, 48.5723], [87.4500, 48.6000]],
                pois: [
                    {
                        name: "å‰å…‹æ™®æ—æ»‘é›ªåœº",
                        note: "1466ç±³è½å·®ï¼ŒçœŸæ­£çš„é‡é›ªä½“éªŒã€‚è¿™é‡Œé£å¤§ï¼Œè¦å¸¦æŠ¤è„¸ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1522506253457-3ba573b3c375?w=500&q=80",
                            "https://images.unsplash.com/photo-1565992441121-4367c29671d0?w=500&q=80",
                            "https://images.unsplash.com/photo-1562638848-18e00d76813b?w=500&q=80",
                            "https://images.unsplash.com/photo-1558356138-073dd5c9e377?w=500&q=80",
                            "https://images.unsplash.com/photo-1605540436563-5bca919ae763?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "å‰å…‹æ™®æ—é¦–æ»‘", desc: "ç²‰é›ªå¤ªçˆ½äº†ï¼Œæ‘”å€’ä¹Ÿä¸ç–¼ã€‚", img: "https://images.unsplash.com/photo-1522506253457-3ba573b3c375?w=500&q=80" },
                            { title: "é‡é›ªé“æ”»ç•¥", desc: "å¤§ç¥è¯·è¿›ï¼Œå°ç™½å‹¿å…¥ã€‚", img: "https://images.unsplash.com/photo-1565992441121-4367c29671d0?w=500&q=80" },
                            { title: "å±±é¡¶é£æ™¯å ªæ¯”ç‘å£«", desc: "éšæ‰‹æ‹å°±æ˜¯å¤§ç‰‡ã€‚", img: "https://images.unsplash.com/photo-1562638848-18e00d76813b?w=500&q=80" },
                            { title: "æ»‘é›ªè£…å¤‡æ¸…å•", desc: "ä¸€å®šè¦å¸¦é˜²é£æŠ¤è„¸ï¼", img: "https://images.unsplash.com/photo-1605540436563-5bca919ae763?w=500&q=80" },
                            { title: "é›ªåœºåˆé¤æµ‹è¯„", desc: "ç‰›è‚‰é¢è¿˜æ˜¯ä¸é”™çš„ã€‚", img: "https://images.unsplash.com/photo-1558356138-073dd5c9e377?w=500&q=80" }
                        ]
                    }
                ],
                tips: "ä¸ç”¨å¼€è½¦ï¼Œåæ»‘é›ªåœºä¸“çº¿è½¦å¾€è¿”ã€‚æ–°æ‰‹ä¸è¦å»é‡é›ªåŒºï¼Œå®¹æ˜“é™·è½¦æˆ–å—ä¼¤ã€‚"
            },
            {
                id: 5,
                date: "2026/1/9 (å‘¨äº”)",
                title: "å†°æ¹–ä¼ è¯´",
                route: "ç¦¾æœ¨ â” å–€çº³æ–¯æ™¯åŒº",
                driveTime: "é¢„è®¡ 3-4 å°æ—¶",
                path: [[87.4363, 48.5723], [87.0436, 48.7046]],
                pois: [
                    {
                        name: "å–€çº³æ–¯æ¹– (é›ªè˜‘è‡)",
                        note: "æ¹–è¾¹çš„é›ªè˜‘è‡æ˜¯å†¬å¤©çš„ç‰¹è‰²ã€‚å¯èƒ½æœ‰'æ™¨é›¾'ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1549466480-1550c18d10b7?w=500&q=80",
                            "https://images.unsplash.com/photo-1517409241908-ff1eb44ac16b?w=500&q=80",
                            "https://images.unsplash.com/photo-1552554279-88096c426217?w=500&q=80",
                            "https://images.unsplash.com/photo-1543857508-3d5f1357f87a?w=500&q=80",
                            "https://images.unsplash.com/photo-1579201729094-118fd7d3c015?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "å–€çº³æ–¯é›ªè˜‘è‡", desc: "å¤ªå¯çˆ±äº†ï¼Œåƒç«¥è¯ä¸–ç•Œä¸€æ ·ã€‚", img: "https://images.unsplash.com/photo-1517409241908-ff1eb44ac16b?w=500&q=80" },
                            { title: "ç¥ä»™æ¹¾æ™¨é›¾", desc: "ä¸€å®šè¦æ—©èµ·ï¼Œè¿æ°”å¥½èƒ½çœ‹åˆ°ã€‚", img: "https://images.unsplash.com/photo-1549466480-1550c18d10b7?w=500&q=80" },
                            { title: "å¶é‡å°ç‹ç‹¸", desc: "åœ¨è·¯è¾¹çœ‹åˆ°äº†èµ¤ç‹ï¼Œå¥½æœ‰çµæ€§ã€‚", img: "https://images.unsplash.com/photo-1552554279-88096c426217?w=500&q=80" },
                            { title: "è€æ‘æ¼«æ­¥", desc: "å®‰é™å¾—åªå¬åˆ°è¸©é›ªçš„å£°éŸ³ã€‚", img: "https://images.unsplash.com/photo-1543857508-3d5f1357f87a?w=500&q=80" },
                            { title: "å–€çº³æ–¯è“å†°", desc: "æ¹–æ°´ç»“å†°å˜èº«è“å®çŸ³ (News.cnæè¿°)ã€‚", img: "https://images.unsplash.com/photo-1579201729094-118fd7d3c015?w=500&q=80" }
                        ]
                    },
                    {
                        name: "æœˆäº®æ¹¾",
                        note: "ç»å…¸æœºä½ã€‚è“è‰²çš„æ¹–æ°´åœ¨é›ªç™½çš„ä¸–ç•Œä¸­èœ¿èœ’ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1497230230219-c7c42701469e?w=500&q=80",
                            "https://images.unsplash.com/photo-1454496522488-7a8e488e8606?w=500&q=80",
                            "https://images.unsplash.com/photo-1518182383220-729f63f2d458?w=500&q=80",
                            "https://images.unsplash.com/photo-1498661608248-0c6a5ae1a0c8?w=500&q=80",
                            "https://images.unsplash.com/photo-1516035985012-70b55de572d4?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "æœˆäº®æ¹¾å®šå¦†ç…§", desc: "å†¬å¤©ä¾ç„¶æœ‰è“è‰²çš„æ°´ã€‚", img: "https://images.unsplash.com/photo-1498661608248-0c6a5ae1a0c8?w=500&q=80" },
                            { title: "å¾’æ­¥ä¸‰æ¹¾", desc: "ä»æœˆäº®æ¹¾èµ°åˆ°å§é¾™æ¹¾ï¼Œæ™¯è‰²æ— æ•Œã€‚", img: "https://images.unsplash.com/photo-1497230230219-c7c42701469e?w=500&q=80" },
                            { title: "å¯»æ‰¾ç½‘çº¢æ ‘", desc: "å°±æ˜¯é‚£æ£µå­¤ç‹¬çš„æ ‘ã€‚", img: "https://images.unsplash.com/photo-1518182383220-729f63f2d458?w=500&q=80" },
                            { title: "é›ªåœ°è„šå°", desc: "åœ¨æ— äººåŒºè¸©å‡ºä¸€ä¸²è„šå°ã€‚", img: "https://images.unsplash.com/photo-1454496522488-7a8e488e8606?w=500&q=80" },
                            { title: "çº¯å‡€ä¸–ç•Œ", desc: "é™¤äº†ç™½è‰²å°±æ˜¯è“è‰²ã€‚", img: "https://images.unsplash.com/photo-1516035985012-70b55de572d4?w=500&q=80" }
                        ]
                    }
                ],
                tips: "å±±è·¯å¤šå¼¯ï¼Œæ³¨æ„æ§åˆ¶è½¦é€Ÿã€‚å–€çº³æ–¯è€æ‘æœ‰å¾ˆå¤šæ°‘å®¿ï¼Œæš–æ°”é€šå¸¸å¾ˆè¶³ã€‚"
            },
            {
                id: 6,
                date: "2026/1/10 (å‘¨å…­)",
                title: "è¥¿åŒ—ç¬¬ä¸€æ‘",
                route: "å–€çº³æ–¯ â” ç™½å“ˆå·´",
                driveTime: "çº¦ 1 å°æ—¶",
                path: [[87.0436, 48.7046], [86.7836, 48.6800]],
                pois: [
                    {
                        name: "ç™½å“ˆå·´æ‘",
                        note: "è¾¹å¢ƒç¢‘ï¼Œè¥¿åŒ—ç¬¬ä¸€å“¨ã€‚æ—¥è½æ—¶åˆ†æ‘å£çš„è§‚æ™¯å°æ˜¯ç»ä½³ä½ç½®ã€‚",
                        images: [
                            "https://images.unsplash.com/photo-1546591467-f08960248a3e?w=500&q=80",
                            "https://images.unsplash.com/photo-1483808166978-278036597a78?w=500&q=80",
                            "https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?w=500&q=80",
                            "https://images.unsplash.com/photo-1548858342-9924558e8055?w=500&q=80",
                            "https://images.unsplash.com/photo-1511874242636-f084ba5c8a9f?w=500&q=80"
                        ],
                        xhsCards: [
                            { title: "åœ¨æ­¤é€šè¿‡ä¸­å“ˆè¾¹å¢ƒ", desc: "ç¥åœ£çš„ç•Œç¢‘ï¼Œå¿…é¡»æ‰“å¡ã€‚(News.cnæ¨è)", img: "https://images.unsplash.com/photo-1546591467-f08960248a3e?w=500&q=80" },
                            { title: "æœ€å­¤ç‹¬çš„å“¨æ‰€", desc: "è‡´æ•¬è¾¹é˜²æˆ˜å£«ã€‚", img: "https://images.unsplash.com/photo-1483808166978-278036597a78?w=500&q=80" },
                            { title: "ç™½å“ˆå·´æ—¥è½", desc: "æ¯”ç¦¾æœ¨äººå°‘ï¼Œæ›´å®‰é™ã€‚", img: "https://images.unsplash.com/photo-1478145046317-39f10e56b5e9?w=500&q=80" },
                            { title: "è¾¹å¢ƒçº¿ä¸Šçš„å°æ‘åº„", desc: "å¯¹é¢å°±æ˜¯å“ˆè¨å…‹æ–¯å¦ã€‚", img: "https://images.unsplash.com/photo-1548858342-9924558e8055?w=500&q=80" },
                            { title: "é›ªåœ°æ¼«æ­¥", desc: "è¸©é›ªçš„å£°éŸ³å¤ªè§£å‹äº†ã€‚", img: "https://images.unsplash.com/photo-1511874242636-f084ba5c8a9f?w=500&q=80" }
                        ]
                    }
                ],
                tips: "ä¸€å®šè¦åœ¨å–€çº³æ–¯åŠç†å¥½ã€Šè¾¹é˜²è¯ã€‹ï¼"
            },
            {
                id: 7,
                date: "2026/1/11 (å‘¨æ—¥)",
                title: "å½’é€”",
                route: "ç™½å“ˆå·´ â” ä¹Œé²æœ¨é½æœºåœº (URC)",
                driveTime: "çº¦ 9 å°æ—¶ (æé•¿)",
                path: [[86.7836, 48.6800], [87.1, 48.0], [87.5, 46.0], [87.6168, 43.7930]],
                pois: [],
                tips: "å¦‚æœä¸€å®šè¦å¼€è½¦å›ä¹Œé²æœ¨é½ï¼Œæ—©ä¸Š8ç‚¹å‰å¿…é¡»å‡ºå‘ã€‚ä¸¤äººè½®æµé©¾é©¶ã€‚"
            }
        ];

        let map, polyline;

        function initMap() {
            if (typeof AMap === 'undefined') {
                console.error("AMap not loaded.");
                return;
            }

            const satelliteLayer = new AMap.TileLayer.Satellite();
            const roadNetLayer = new AMap.TileLayer.RoadNet();

            map = new AMap.Map('gaode-map', {
                resizeEnable: true,
                center: [87.6168, 43.7930],
                zoom: 6,
                layers: [satelliteLayer, roadNetLayer]
            });

            map.addControl(new AMap.ToolBar());
            map.addControl(new AMap.Scale());

            showOverview();
        }

        function drawRoute(pathCoordinates, startName, endName) {
            if (!map) return;
            map.clearMap();

            // Start Marker with Label inside map
            new AMap.Marker({
                position: pathCoordinates[0],
                map: map,
                icon: 'https://webapi.amap.com/theme/v1.3/markers/n/start.png',
                offset: new AMap.Pixel(-10, -34),
                label: {
                    content: `<div style="background:#fff; padding:2px 5px; border-radius:3px; color:#333; font-weight:bold;">${startName || 'èµ·ç‚¹'}</div>`,
                    direction: 'top'
                }
            });

            // End Marker with Label inside map
            new AMap.Marker({
                position: pathCoordinates[pathCoordinates.length - 1],
                map: map,
                icon: 'https://webapi.amap.com/theme/v1.3/markers/n/end.png',
                offset: new AMap.Pixel(-10, -34),
                label: {
                    content: `<div style="background:#fff; padding:2px 5px; border-radius:3px; color:#333; font-weight:bold;">${endName || 'ç»ˆç‚¹'}</div>`,
                    direction: 'top'
                }
            });

            polyline = new AMap.Polyline({
                path: pathCoordinates,
                isOutline: true,
                outlineColor: 'rgba(0,0,0,0.5)',
                borderWeight: 2,
                strokeColor: "#38bdf8",
                strokeOpacity: 0.9,
                strokeWeight: 6,
                strokeStyle: "solid",
                lineJoin: 'round',
                lineCap: 'round',
                zIndex: 50,
            });

            polyline.setMap(map);
            map.setFitView([polyline], true, [40, 40, 40, 40]);
        }

        function showOverview() {
            if (!map) return;
            const allPaths = [];
            itineraryData.forEach(d => {
                if (d.path && d.path.length > 0) {
                    d.path.forEach(p => allPaths.push(p));
                }
            });
            drawRoute(allPaths, "ä¹Œé²æœ¨é½", "ä¹Œé²æœ¨é½");
        }

        function renderItinerary() {
            const list = document.getElementById('itinerary-list');
            list.innerHTML = itineraryData.map((day, index) => `
                <div class="day-card" onclick="selectDay(${index})">
                    <div class="day-header">
                        <span class="day-tag">Day ${day.id}</span>
                        <span class="date-tag">${day.date}</span>
                    </div>
                    <h3 class="route-title">${day.title}</h3>
                    <div class="meta-info">
                        <div class="meta-item">ğŸš— ${day.driveTime}</div>
                    </div>
                    
                    <div class="details">
                        <div class="section-title">ğŸ“ è¡Œç¨‹è·¯çº¿</div>
                        <p style="font-size: 0.9rem; color: #cbd5e1; margin-bottom: 1rem;">${day.route}</p>
                        
                        <div class="section-title">ğŸ’¡ æ¸¸ç©è´´å£«</div>
                        <div class="tips-box">
                            ${day.tips}<br><br>
                            ${day.description || ''}
                        </div>
                        
                        <div class="section-title">ğŸ¢ ç²¾å½©çœ‹ç‚¹ (å°çº¢ä¹¦ç²¾é€‰)</div>
                        <ul class="poi-list">
                            ${day.pois.map(poi => `
                                <li class="poi-item">
                                    <div style="font-weight:700; font-size:1rem; margin-bottom:0.3rem;">${poi.name}</div>
                                    <div style="font-size:0.85rem; color:#94a3b8; margin-bottom:0.8rem;">${poi.note}</div>
                                    
                                    <!-- XHS Cards -->
                                    <div style="display:flex; flex-direction:column; gap:10px;">
                                        ${poi.xhsCards ? poi.xhsCards.map(card => `
                                            <a href="https://www.xiaohongshu.com/search_result?keyword=${encodeURIComponent(poi.name + ' ' + card.title)}" target="_blank" style="text-decoration:none; color:inherit;">
                                                <div style="display:flex; gap:10px; background:rgba(255,255,255,0.05); padding:8px; border-radius:8px; align-items:center; transition:background 0.2s;" onmouseover="this.style.background='rgba(255,255,255,0.1)'" onmouseout="this.style.background='rgba(255,255,255,0.05)'">
                                                    <img src="${card.img}" style="width:60px; height:60px; object-fit:cover; border-radius:6px; background:#444;">
                                                    <div style="flex:1;">
                                                        <div style="font-size:0.9rem; font-weight:600; margin-bottom:4px; display:-webkit-box; -webkit-line-clamp:1; -webkit-box-orient:vertical; overflow:hidden;">${card.title}</div>
                                                        <div style="font-size:0.75rem; color:#aaa; display:-webkit-box; -webkit-line-clamp:2; -webkit-box-orient:vertical; overflow:hidden;">${card.desc}</div>
                                                    </div>
                                                </div>
                                            </a>
                                        `).join('') : ''}
                                    </div>
                                    
                                    <div class="img-gallery">
                                        ${poi.images ? poi.images.map(url => `<img src="${url}" class="gallery-img" loading="lazy" />`).join('') : ''}
                                    </div>

                                    <a href="https://www.xiaohongshu.com/search_result?keyword=${encodeURIComponent(poi.name + 'æ”»ç•¥')}" target="_blank" class="link-btn">
                                        æŸ¥çœ‹æ›´å¤š ${poi.name} ç¬”è®° >
                                    </a>
                                </li>
                            `).join('')}
                        </ul>
                    </div>
                </div>
            `).join('');
        }

        function selectDay(index) {
            document.querySelectorAll('.day-card').forEach(c => c.classList.remove('active'));
            document.querySelectorAll('.day-card')[index].classList.add('active');

            const day = itineraryData[index];
            if (day.path) {
                // Heuristic for start/end names
                const spots = day.route.split('â”').map(s => s.trim());
                const start = spots[0];
                const end = spots[spots.length - 1];
                drawRoute(day.path, start, end);
            }
        }

        window.addEventListener('load', () => {
            initMap();
            renderItinerary();
        });
    </script>
</body>

</html>